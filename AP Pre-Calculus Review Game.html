<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AP Precalculus Review Game</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&family=Montserrat:wght@700;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px;
      min-height: 100vh;
      margin: 0;
      justify-content: center;
      background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
      position: relative;
      overflow-x: hidden;
    }
    body::before,
    body::after {
      content: '';
      position: fixed;
      top: 0;
      bottom: 0;
      width: 100px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 800" preserveAspectRatio="none"><path d="M0,0 C20,50 30,150 50,200 S70,300 50,350 30,450 50,500 70,600 50,650 30,750 50,800 H0 V0 Z" fill="rgba(46,125,50,0.2)" opacity="0.5"/></svg>');
      background-repeat: no-repeat;
      background-size: 100px 100%;
      z-index: -1;
    }
    body::before {
      left: 0;
    }
    body::after {
      right: 0;
      transform: scaleX(-1);
    }
    @media (max-width: 600px) {
      body::before,
      body::after {
        display: none;
      }
    }
    #game-root {
      transform: scale(0.9);
      transform-origin: top center;
      width: 100vw;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h2 {
      font-family: 'Poppins', 'Montserrat', sans-serif;
      font-size: 2.2rem;
      background: linear-gradient(45deg, #2e7d32, #66bb6a);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin: 10px 0 10px 0;
      text-shadow: 0 0 6px rgba(46, 125, 50, 0.4);
      letter-spacing: 1.5px;
      font-weight: 700;
      text-align: center;
      animation: titleFadeIn 1.1s cubic-bezier(.5,1.6,.34,1);
      line-height: 1.15;
    }
    @keyframes titleFadeIn {
      from { opacity: 0; transform: translateY(-18px);}
      to { opacity: 1; transform: translateY(0);}
    }
    #players {
      margin: 10px 0 10px 0;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 32px;
      width: 100%;
      position: relative;
      z-index: 2;
    }
    .player {
      font-size: 1.08rem;
      font-family: 'Montserrat', sans-serif;
      background: #e8f5e9;
      border-radius: 24px;
      padding: 7px 18px 7px 38px;
      font-weight: 700;
      box-shadow: 0 2px 10px #0001;
      position: relative;
      transition: box-shadow .25s, background .25s;
      display: flex;
      align-items: center;
      gap: 8px;
      color: #333;
      letter-spacing: .3px;
    }
    .player.active {
      background: linear-gradient(90deg, #d4fc79, #96e6a1 100%);
      box-shadow: 0 6px 24px #2af59844;
      font-size: 1.13rem;
      border: 2px solid #2e7d32;
      color: #111;
    }
    .avatar {
      width: 26px; height: 26px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      font-weight: 700;
      box-shadow: 0 2px 8px #0002;
      position: absolute;
      left: 7px;
      top: 50%;
      transform: translateY(-50%);
    }
    .avatar.red { background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%); color: #fff; }
    .avatar.blue { background: linear-gradient(135deg, #2193b0 0%, #6dd5ed 100%); color: #fff; }
    #board {
      display: grid;
      grid-template-columns: repeat(5, 80px);
      grid-template-rows: repeat(5, 80px);
      gap: 4px;
      margin: 10px 0;
      position: relative;
      border: 2px solid #333;
      border-radius: 12px;
      padding: 5px;
      background-color: #fff;
      box-shadow: 0 4px 18px rgba(46, 125, 50, 0.13), 0 1.5px 4px #2e7d3222;
      justify-content: center;
      align-items: center;
      min-width: 400px;
    }
    .cell {
      width: 80px;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      border: 1px solid #ddd;
      border-radius: 7px;
      font-size: 1.35rem;
      font-weight: 700;
      transition: transform 0.2s, box-shadow 0.18s;
      background: #fff;
      color: #222;
      user-select: none;
      letter-spacing: .5px;
    }
    .cell:hover {
      transform: scale(1.09) rotate(-2deg);
      box-shadow: 0 0 0 4px #66bb6a55, 0 4px 15px #2e7d3222;
      z-index: 2;
    }
    .cell:nth-child(1), .cell:nth-child(6), .cell:nth-child(11), .cell:nth-child(16), .cell:nth-child(21) { background: #e3f2fd }
    .cell:nth-child(2), .cell:nth-child(7), .cell:nth-child(12), .cell:nth-child(17), .cell:nth-child(22) { background: #e8f5e9 }
    .cell:nth-child(3), .cell:nth-child(8), .cell:nth-child(13), .cell:nth-child(18), .cell:nth-child(23) { background: #fff3e0 }
    .cell:nth-child(4), .cell:nth-child(9), .cell:nth-child(14), .cell:nth-child(19), .cell:nth-child(24) { background: #f3e5f5 }
    .cell:nth-child(5), .cell:nth-child(10), .cell:nth-child(15), .cell:nth-child(20), .cell:nth-child(25) { background: #ffebee }
    .cell .topic-icon {
      position: absolute;
      bottom: 5px; right: 8px;
      font-size: 1.13rem;
      opacity: 0.7;
      pointer-events: none;
    }
    .token {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      position: absolute;
      display: none;
      box-shadow: 0 4px 10px rgba(0,0,0,0.20), 0 0 0 3px #fff;
      border: 2px solid #fff;
      z-index: 9;
      animation: tokenBounce 0.7s;
      transition: left .4s cubic-bezier(.65,1.5,.5,1), top .4s cubic-bezier(.65,1.5,.5,1), box-shadow .2s;
    }
    @keyframes tokenBounce {
      0% { transform: scale(1.4);}
      70% { transform: scale(0.9);}
      100% { transform: scale(1);}
    }
    #legend {
      display: flex;
      justify-content: center;
      gap: 14px;
      margin: 7px 0 6px 0;
      flex-wrap: wrap;
      position: relative;
      z-index: 2;
      padding-bottom: 3px;
      width: 100%;
    }
    .legend-item {
      display: flex;
      align-items: center;
      font-size: 1.05rem;
      font-family: 'Montserrat', sans-serif;
      gap: 5px;
      background: #fff;
      border-radius: 8px;
      padding: 3.5px 13px;
      box-shadow: 0 1px 4px #0001;
      font-weight: 700;
      color: #27323b;
    }
    .color-box {
      width: 16px;
      height: 16px;
      margin-right: 5px;
      border-radius: 3px;
      border: 1px solid #ccc;
      display: inline-block;
    }
    .polynomial { background: #e3f2fd; }
    .quadratic { background: #e8f5e9; }
    .complex { background: #fff3e0; }
    .exponents { background: #f3e5f5; }
    .radicals { background: #ffebee; }
    .topic-emoji { margin-right: 2px; }
    #turn {
      font-size: 1.15rem;
      font-weight: bold;
      margin: 7px 0 7px 0;
      color: #2e7d32;
      text-align: center;
      letter-spacing: 1.1px;
      text-shadow: 0 1px 2px #fff8, 0 3px 12px #2e7d3240;
      transition: color .3s;
      font-family: 'Montserrat', sans-serif;
      width: 100%;
    }
    #controls {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      margin: 7px 0 0 0;
      position: relative;
      z-index: 2;
    }
    #rollBtn {
      padding: 13px 36px;
      font-size: 1.18rem;
      border-radius: 50px;
      background: linear-gradient(90deg, #2e7d32 0%, #66bb6a 100%);
      color: #fff;
      font-family: 'Montserrat', sans-serif;
      font-weight: 800;
      letter-spacing: 1.1px;
      border: none;
      outline: none;
      box-shadow: 0 4px 14px rgba(46, 125, 50, 0.18), 0 1.5px 8px #2e7d3244;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s, box-shadow .2s;
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 5px;
      justify-content: center;
      margin-left: auto;
      margin-right: auto;
    }
    #rollResult {
      font-size: 1.08rem;
      color: #2e7d32;
      font-family: 'Montserrat', sans-serif;
      min-width: 70px;
      text-align: center;
      font-weight: 700;
      text-shadow: 0 2px 8px #2e7d3214;
      margin-top: 2px;
      margin-bottom: 2px;
    }
    #question {
      max-width: 400px;
      margin: 10px auto 0 auto;
      padding: 13px 16px 10px 16px;
      background-color: #e8f5e9;
      border: 1.5px solid #c3e6cb;
      border-radius: 7px;
      text-align: center;
      box-shadow: 0 2px 7px rgba(0,0,0,0.08);
      font-size: 1.08rem;
      display: none;
      min-height: 26px;
      font-weight: 700;
      color: #313e22;
      letter-spacing: .5px;
    }
    #question:not(:empty) { display: block;}
    button {
      font-family: 'Montserrat', sans-serif;
      font-weight: 700;
      padding: 8px 16px;
      font-size: 1.12rem;
      background-color: #2e7d32;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.2s, transform 0.2s;
      margin: 0 2px;
    }
    button:hover {
      background-color: #388e3c;
      transform: scale(1.09);
      animation: pulse 1.5s infinite;
    }
    button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
      transform: none;
      animation: none;
    }
    @keyframes pulse {
      0% { transform: scale(1.08);}
      50% { transform: scale(1.13);}
      100% { transform: scale(1.08);}
    }
    #credit {
      font-family: 'Poppins', 'Montserrat', sans-serif;
      font-size: 1.01rem;
      font-weight: 700;
      color: #333;
      text-align: center;
      margin: 35px auto 10px auto;
      text-shadow: 0 1px 2px #2e7d3211;
      position: relative;
      z-index: 2;
      opacity: 0.98;
      letter-spacing: 0.7px;
      background: #fff;
      border-radius: 9px;
      padding: 7px 22px;
      box-shadow: 0 2px 7px #2e7d3211;
      width: fit-content;
      display: block;
    }
  </style>
</head>
<body>
<div id="game-root">
  <h2>AP Precalculus Review Game</h2>
  <div id="players">
    <span id="player1" class="player" style="color: red;"><span class="avatar red">1</span>Player 1</span>
    <span id="player2" class="player" style="color: blue;"><span class="avatar blue">2</span>Player 2</span>
  </div>
  <div id="board"></div>
  <div id="legend">
    <div class="legend-item"><span class="color-box polynomial"></span> <span class="topic-emoji">🧮</span> Polynomial</div>
    <div class="legend-item"><span class="color-box quadratic"></span> <span class="topic-emoji">📐</span> Quadratic</div>
    <div class="legend-item"><span class="color-box complex"></span> <span class="topic-emoji">💡</span> Complex</div>
    <div class="legend-item"><span class="color-box exponents"></span> <span class="topic-emoji">🔢</span> Exponents</div>
    <div class="legend-item"><span class="color-box radicals"></span> <span class="topic-emoji">🌱</span> Radicals</div>
  </div>
  <div id="turn"></div>
  <div id="controls">
    <button id="rollBtn">Roll Die 🎲</button>
    <span id="rollResult"></span>
  </div>
  <div id="question"></div>
  <div id="credit">Created by Smaran Paul © 2025</div>
</div>
<script>
  var b = document.getElementById("board")
  var topics = ["Polynomial", "Quadratic", "Complex", "Exponents", "Radicals"]
  var topicIcons = {
    "Polynomial": "🧮",
    "Quadratic": "📐",
    "Complex": "💡",
    "Exponents": "🔢",
    "Radicals": "🌱"
  }
  for (var i = 1; i <= 25; i++) {
    var cell = document.createElement("div");
    cell.className = "cell";
    cell.innerText = i;
    cell.dataset.index = i;
    var col = Math.ceil(i / 5);
    var ticon = document.createElement("span");
    ticon.className = "topic-icon";
    ticon.textContent = topicIcons[topics[col - 1]];
    cell.appendChild(ticon);
    b.appendChild(cell);
  }
  var whoGoes = 0
  var positions = [0,0]
  var clrs = ['red','blue']
  var tokens = []
  var r = document.createElement("div")
  r.className = "token"
  r.style.backgroundColor = "red"
  r.style.display = "none"
  r.id = "token0"
  tokens.push(r)
  document.getElementById("board").appendChild(r)
  var bl = document.createElement("div")
  bl.className = "token"
  bl.style.backgroundColor = "blue"
  bl.style.display = "none"
  bl.id = "token1"
  tokens.push(bl)
  document.getElementById("board").appendChild(bl)
  var qz = {}
  qz["Polynomial"] = [ {q:"(2x^2+3x-5)+(-x^2+4x+2)= ?", a:"x^2+7x-3"}, {q:"(x-2)(x^2+2x+3)= ?", a:"x^3-x-6"}, {q:"(3x+1)(2x-5)+x(x+4)= ?", a:"7x^2-9x-5"}, {q:"(4x^2-x+6)-(x^2+3x-2)= ?", a:"3x^2-4x+8"}, {q:"(x-3)(x+3)(x+1)= ?", a:"x^3+x^2-9x-9"} ]
  qz["Quadratic"] = [ {q:"(x^2-5x+4)/(x-4)= ?", a:"x-1"}, {q:"Rewrite y=2x^2-8x+5 in vertex form ?", a:"2(x-2)^2-3"}, {q:"Solve x^2+6x+9=0 ?", a:"x=-3"}, {q:"Factor 3x^2+x-4 ?", a:"(3x+4)(x-1)"}, {q:"Simplify (x^2-9)/(x^2-6x+9)= ?", a:"(x+3)/(x-3)"} ]
  qz["Complex"] = [ {q:"(3+2i)+(-1+5i)= ?", a:"2+7i"}, {q:"(2+3i)(1-4i)= ?", a:"14-5i"}, {q:"Modulus of -3+4i ?", a:"5"}, {q:"(5-5i)/(1+2i)= ?", a:"-1-3i"}, {q:"Roots of x^2+1=0 ?", a:"±i"} ]
  qz["Exponents"] = [ {q:"x^3 * x^-5 = ?", a:"x^-2"}, {q:"(2x^4 y^-2)^2 = ?", a:"4x^8y^-4"}, {q:"(a^3 b^-1)/(a^-2 b^4)= ?", a:"a^5/b^5"}, {q:"(x^(1/2) y^(1/3))^6 = ?", a:"x^3y^2"}, {q:"16^(3/4)= ?", a:"8"} ]
  qz["Radicals"] = [ {q:"√50 = ?", a:"5√2"}, {q:"√18/√2 = ?", a:"3"}, {q:"√(a^4b^2)= ?", a:"a^2b"}, {q:"Rationalize 5/√3 = ?", a:"5√3/3"}, {q:"√8+2√2 = ?", a:"4√2"} ]
  function updateTurn(){
    document.getElementById("turn").textContent = "Player " + (whoGoes + 1) + "'s turn."
    document.querySelectorAll(".player").forEach(function(el){
      el.classList.remove("active")
    })
    document.getElementById("player"+(whoGoes+1)).classList.add("active")
  }
  updateTurn()
  document.getElementById("rollBtn").onclick = function(){
    var roll = Math.floor(Math.random()*6)+1
    document.getElementById("rollResult").textContent = "Rolled: " + roll
    var dest = positions[whoGoes] + roll
    if(dest > 25){
      document.getElementById("question").innerHTML = "<em>Can't move. Need " + (25 - positions[whoGoes]) + " or less.</em>"
      whoGoes = (whoGoes + 1) % clrs.length
      updateTurn()
      ref()
      return
    }
    goAsk(dest)
  }
  function ref(){
    for(var i=0;i<clrs.length;i++){
      var pos = positions[i]
      var tkn = document.getElementById("token"+i)
      if(pos==0){
        tkn.style.display = "none"
      }else{
        var box = document.querySelector(".cell[data-index='"+pos+"']")
        var boxr = box.getBoundingClientRect()
        tkn.style.display = "block"
        tkn.style.left = (box.offsetLeft + box.offsetWidth/2 - 14) + "px"
        tkn.style.top = (box.offsetTop + box.offsetHeight/2 - 14) + "px"
      }
    }
  }
  function goAsk(to){
    var col = Math.ceil(to/5)
    if(col < 1) col = 1
    var type = topics[col-1]
    var pile = qz[type]
    if(!pile.length){
      document.getElementById("question").innerHTML = "<em>No more questions in "+type+"</em>"
      whoGoes = (whoGoes + 1) % clrs.length
      updateTurn()
      return
    }
    var item = pile.shift()
    var userInput = prompt(type+" Q: "+item.q)
    if(!userInput || userInput.trim() !== item.a){
      alert("Wrong. Answer: "+item.a)
      positions[whoGoes] = Math.max(0, positions[whoGoes] - 1)
      ref()
    }else{
      alert("Correct!")
      positions[whoGoes] = to
      ref()
    }
    if(positions[whoGoes] === 25){
      document.getElementById("question").textContent = "Player "+(whoGoes+1)+" wins!"
      alert("Player "+(whoGoes+1)+" wins!")
      document.getElementById("rollBtn").disabled = true
      ref()
    }else{
      whoGoes = (whoGoes + 1) % clrs.length
      updateTurn()
    }
  }
  setTimeout(ref, 100)
  window.addEventListener("resize", ref)
  window.addEventListener("scroll", ref)
</script>
</body>
</html>